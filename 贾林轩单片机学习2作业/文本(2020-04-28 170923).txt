#include <reg51.h>#include <intrins.h>#define uint unsigned int#define uchar unsigned charsbit DULA=P2^6;sbit WELA=P2^7;sbit D1=P1^0;uchar numDU,numWE,temp,tt1,tt2,tt3,tt4,w0,w1,w2,w3,w4,w5,z;uint num,num1,num2;uchar code tableDU[]={   0x3f,0x06,0x5b,0x4f,   0x66,0x6d,0x7d,0x07,   0x7f,0x6f,0x77,0x7c,   0x39,0x5e,0x79,0x71};uchar code tableWE[]={0xdf,0xef,0xf7,0xfb,0xfd,0xfe};  void init()//初始化子程序（用于初始化变量） {   numDU=0;numWE=0;tt1=0;tt2=0;tt3=0;tt4=0;   DULA=0;WELA=0;temp=0xfe;z=0;   TMOD=0x11;   TH0=(65536-400)/256;   TL0=(65536-400)%256;   TH1=(65536-50000)/256;   TL1=(65536-50000)%256;   EA=1;   ET0=1;   TR0=1;   ET1=1;   TR1=1; } void delay (uchar z) {    uchar x,y;    for(x=z;x>0;x--)       for(y=110;y>0;y--); } void display1(uint num1) {    w0=num1%10;    P0=tableWE[0];    WELA=1;WELA=0;    P0=tableDU[w0];    DULA=1;DULA=0;    P0=0xff;    w1=(num1/10)%10;    P0=tableWE[1];    WELA=1;WELA=0;    P0=tableDU[w1];    DULA=1;DULA=0;    P0=0xff;     w2=(num1/100)%10;    P0=tableWE[2];    WELA=1;WELA=0;    P0=tableDU[w2];    DULA=1;DULA=0;    P0=0xff; }  void display2(uint num2){    w3=(num2%10)%10;    P0=tableWE[3];    WELA=1;WELA=0;    P0=tableDU[w3];    DULA=1;DULA=0;    P0=0xff;    w4=(num2/10)%10;    P0=tableWE[4];    WELA=1;WELA=0;    P0=tableDU[w4];    DULA=1;DULA=0;    P0=0xff;       w5=(num2/100)%10;    P0=tableWE[5];    WELA=1;WELA=0;    P0=tableDU[w5];    DULA=1;DULA=0;    P0=0xff;}void dispalyHELLO (){    P0=tableWE[0];    WELA=1;WELA=0;    P0=tableDU[0];    DULA=1;DULA=0;    P0=0x00;       P0=tableWE[1];    WELA=1;WELA=0;    P0=0x38;    DULA=1;DULA=0;    P0=0x00;       P0=tableWE[2];    WELA=1;WELA=0;    P0=0x38;    DULA=1;DULA=0;    P0=0x00;       P0=tableWE[3];    WELA=1;WELA=0;    P0=0x79;    DULA=1;DULA=0;    P0=0x00;        P0=tableWE[4];    WELA=1;WELA=0;    P0=0x76;    DULA=1;DULA=0;    P0=0x00; }void t0() interrupt 1 {    TH0=(65536-400)/256;    TL0=(65536-400)%256;    tt1++;tt4++;        if(tt1==2&tt3<60)	 {	    tt1=0;	    display1(num1);	    display2(num2);	 }	 if(tt1==1&tt3>=60)	 {	    if(tt3==100)	       tt3=60;	    tt1=0;	    dispalyHELLO ();	 } } void t1() interrupt 3 {    TH1=(65536-50000)/256;    TL1=(65536-50000)%256;    tt2++;tt3++;         if(tt2%2==0&tt2<11)	 {	    num1--; 	    tt3=0;	 }	 if(tt2==10)	 {	    tt2=0;	    temp=_crol_(temp,1);	    P1=temp;	 }	     }  void main() {       num1=432;   num2=765;   init();//调用初始化子程序初始化变量   while(1)   {      if(num1==398)	 {	    tt2=20;	    while(tt3<60)	    {	       P1=0x00;	       delay(500);	       P1=0xff;	       delay(500);	    }	 }   /*   if(tt3==60)	 {	    //tt1=3;	    P1=0xff;	   // DULA=0;WELA=0;	   // dispalyHELLO ();	   // delay(10000);	 }*/   }}